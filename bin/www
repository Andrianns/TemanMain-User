const app = require('../app.js');
const port = process.env.PORT || 4001;
const db = require('../config/db.config');
const dotenv = require('dotenv');

const { Sequelize } = require('sequelize');

const sequelize = new Sequelize({
  dialect: 'postgres',
  host: 'containers-us-west-165.railway.app',
  port: 4001,
  username: 'postgres',
  password: 'postgres',
  database: 'TemanMain-user',
  dialectOptions: {
    ssl: {
      require: true,
      rejectUnauthorized: false,
    },
  },
});

// Test the connection by logging the Sequelize version
(async () => {
  await sequelize.authenticate();
  console.log('Connection has been established successfully.');
  console.log(`Sequelize version: ${sequelize.version}`);
})();

app.listen(port, () => {
  console.log(`App listening on port ${port}`);
});
